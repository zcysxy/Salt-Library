# 添加新书

[[Report]]

---

/& Page

此部分对应的页面信息为

* Page title: New Book
* Route: `/newbook`

&/

/+ Code

此部分对应的代码为

* `book.py` 中的 `newbook()` 函数
* `newbook.html`

+/

馆长向图书馆添加新书的途径有三个, 前两个分别是从[[请求管理|请求]]中直接添加或编辑后添加, 第三个是主动添加新书. 编辑请求和主动添加新书进入的是同一个页面, 即添加新书页面, 该页面跟[[请求书籍]]和[[书籍管理#编辑书籍信息|编辑书籍]]页面一致, 都是一个填写书籍信息的表格. 唯一的差别是编辑请求时表格会自动填入书友已填写信息, 而主动添加新书面对的是一个空白表格. 而且添加新书的过程也与[[请求书籍]]和[[书籍管理#编辑书籍信息|编辑书籍]]一致, 即先调用函数 `check_book()` 检查书籍信息是否合法, 若合法则将信息插入表 *books*; 若不合法则返回错误信息. 新书添加成功后, 应用自动跳转到新添加的[[书籍页面]].