:> # 实验报告 <:

:> **张宸宇 18300180101** <:

> Template here
> 【注意事项】：请重视实验报告的撰写，实验报告是评分的主要依据，对你已经实现的功能应该尽量写得详细，措辞要清晰、专业，格式规范。两人合作的小组，务必写清实验分工。

## 〇. 写在前面

未采用原题 (图书销售管理系统), 本实验项目想实现一个类似于 "豆瓣" 的图书馆网络应用 - **Salt Library**. 对照原题和 "豆瓣", 本应用的主要功能 (即需求) 为:

* 书籍的查询与管理
* 用户的注册, 登录, 与管理
* 书籍的购买与销售管理
* 书籍的标记, 评分, 与评论和它们的展示
* "我的图书馆" - 集中展示用户标记过的书籍和相关信息
* 缺失书籍申请系统

本应用设置三种**角色**:

1. 游客 tourist
    * 即用户未登录时的角色
    * 游客可以查询和浏览书籍信息, 还可以账号注册
2. 矿友/书友 Miner
    * 应用的正式用户角色
    * 任何用户可以注册成为书友
    * 书友可以对任何书籍进行购买, 标记, 评分, 评论等操作
3. 馆长 curator
    * 图书馆应用的超级管理员, 拥有所有权限
    * 可以管理书籍, 查看用户, 销售等信息

现介绍一些本报告, 应用和其他地方会出现的一些专有词汇:

* Salt Library: 本应用/图书馆名字
* Miner/书友/矿友: 本应用正式用户的称号
    * 本报告中一般称为**书友**, 应用及代码中一般称为 **Miner**
* ID: 书友的登录账号, 区别于**显示用户名 name**
* request/请求: 书友申请图书馆添加一本暂未包含的书籍的操作
* tag/标签/标记标签状态/状态标签, tag_state/标签状态
* rate/rating/评分/打分
* review/评论/书评

## 一、实验题目

> 图书销售管理系统的设计与实现。（自选题目的同学填写自选题目，且详述实验背景。）

![[实验题目]]

## 二、开发环境

> 介绍本次实验你所采用的开发环境，包括操作系统，数据库管理软件，编程语言，客户端或 Web 开发环境等。

[[开发环境]]

## 三、数据库设计

> 介绍本项目的数据库设计，给出系统数据库的 ER 图，对每个表的功能和属性进行说明。

### [[E-R 模型设计]]

### [[转化为关系模式]]

### [[表格创建]]

### [[函数依赖与范式]]

### [[索引]]

### [[视图]]

### [[授权]]

### 函数, 储存过程, 与触发器

/+ SQL

SQL 函数, 储存过程, 触发器的定义代码分别请见 ;;`functions.sql`, `procedures.sql`, `triggers.sql`;;

+/

本实验项目的另一哲学或宗旨是希望在数据库内部保证数据的稳定性, 连续性, 和安全性. 因此大部分数据操作我们都是通过储存在数据库中的 SQL 函数, 过程, 和触发器来完成的. 根据这些方法的特定目标和内容, 我们将在;;系统设计;;中的具体部分详细说明, 这里仅提供三个列表以供参考.

* 8 个函数
    1. `change_tag()`
    2. `change_rating()`
    3. `change_review()`
    4. `insert_miners()`
    5. `update_miners()`
    6. `check_book()`
    7. `insert_request()`
    8. `read_time()`
* 个过程
* 4 个触发器
    1. `update_sold`
    2. `update_u_rating`
    3. `update_request_state`
    4. `delete_requested_book`

## 四、系统设计

> 对照实验要求，展示系统的主要功能，适当截图，对每个功能内部的实现流程进行说明。
> 对某些关键的功能实现，可以通过展示代码来分析。

### [[数据库连接]]

### [[网页结构]]

* 基本 UI
* 转移机制

### 游客功能

* [[主页]]
* [[模糊搜索]]
* [[高级搜索]]
* [[书籍页面]]

### [[书友注册与登录]]

书友登录后, 应用会将角色信息 (数据库登录角色和密码) 储存在应用会话 (session) 中.

### 书友功能

这部分我们介绍一下登录后书友的专属功能. 再介绍其他功能之前我们先回到[[书籍页面]], 之前游客只能查看的所有标记信息, 现在书友可以进行相关的标记操作了.

* [[加入购物车]]
* [[标签]]
* [[评分]]
* [[评论]]

接下来我们进入书友的 "主页" 书友面板 *profile* 来进一步介绍书友的专属功能.

* [[书友面板]]
* [[购物车]]
* [[修改用户信息]]
* [[请求书籍]]
* [ ] [[我的图书馆]]

### 馆长功能

* [[馆长面板]]
* [[书籍管理]]
* [[书友管理]]
* [[销售管理]]
* [ ] [[请求管理]]
* [[添加新书]]
* [ ] [[原始 SQL]]

## 五、特色和创新点

如果你的系统有任何功能或技术上的特色或创新之处，请在这里加以说明。

## 七、提交文件说明

对提交的源代码，数据库脚本进行说明。

## 八、实验总结

总结本次实验，你说学习到的内容，以及碰到的问题等。