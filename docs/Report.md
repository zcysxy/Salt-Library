# 实验报告

张宸宇 18300180101

## 〇. 写在前面

未采用原题 (图书销售管理系统), 本实验项目想实现一个类似于 "豆瓣" 的图书馆网络应用 - **Salt Library**. 对照原题和 "豆瓣", 本应用的主要功能 (即需求) 为:

* 书籍的查询与管理
* 用户的注册, 登录, 与管理
* 书籍的购买与销售管理
* 书籍的标记, 评分, 与评论和它们的展示
* "我的图书馆" - 集中展示用户标记过的书籍和相关信息
* 缺失书籍申请系统

本应用设置三种**角色**:

1. 游客 tourist
    * 即用户未登录时的角色
    * 游客可以查询和浏览书籍信息, 还可以账号注册
2. 矿友/书友 Miner
    * 应用的正式用户角色
    * 任何用户可以注册成为书友
    * 书友可以对任何书籍进行购买, 标记, 评分, 评论等操作
3. 馆长 curator
    * 图书馆应用的超级管理员, 拥有所有权限
    * 可以管理书籍, 查看用户, 销售等信息

现介绍一些本报告, 应用和其他地方会出现的一些专有词汇:

* Salt Library: 本应用/图书馆名字
* Miner/书友/矿友: 本应用正式用户的称号
    * 本报告中一般称为**书友**, 应用及代码中一般称为 **Miner**
* ID: 书友的登录账号, 区别于**显示用户名 name**
* request/请求: 书友申请图书馆添加一本暂未包含的书籍的操作
* tag/标签/标记标签状态/状态标签, tag_state/标签状态
* rate/rating/评分/打分
* review/评论/书评

## 一、实验题目

[[实验题目]]

## 二、开发环境

[[开发环境]]

## 三、数据库设计

### [[E-R 模型设计]]

### [[转化为关系模式]]

### [[表格创建]]

### [[索引]]

### [[视图]]

### [[授权]]

### 函数, 储存过程, 与触发器

/+ SQL

SQL 函数, 储存过程, 触发器的定义代码分别请见 ;;`functions.sql`, `procedures.sql`, `triggers.sql`;;

+/

本实验项目的另一哲学或宗旨是希望在数据库内部保证数据的稳定性, 连续性, 和安全性. 因此大部分数据操作我们都是通过储存在数据库中的 SQL 函数, 过程, 和触发器来完成的. 根据这些方法的特定目标和内容, 我们将在;;系统设计;;中的具体部分详细说明, 这里仅提供三个列表以供参考.

* 8 个函数
    1. `change_tag()`
    2. `change_rating()`
    3. `change_review()`
    4. `insert_miners()`
    5. `update_miners()`
    6. `check_book()`
    7. `insert_request()`
    8. `read_time()`
* 4 个储存过程
    1. `buying`
    2. `tagging`
    3. `rating`
    4. `reviewing`
* 4 个触发器
    1. `update_sold`
    2. `update_u_rating`
    3. `update_request_state`
    4. `delete_requested_book`

## 四、系统设计

> 对照实验要求, 展示系统的主要功能, 适当截图, 对每个功能内部的实现流程进行说明.
> 对某些关键的功能实现, 可以通过展示代码来分析.

### [[数据库连接]]

### [[网页结构]]

### 游客功能

* [[主页]]
* [[模糊搜索]]
* [[高级搜索]]
* [[书籍页面]]

### [[书友注册与登录]]

### 书友功能

这部分我们介绍一下用户以书友身份登陆后拥有的专属功能. 再介绍其他功能之前我们先回到[[书籍页面]], 之前游客只能查看的所有标记信息, 现在书友可以进行相关的标记操作了.

* [[加入购物车]]
* [[标签]]
* [[评分]]
* [[评论]]

接下来我们进入书友的 "主页" 书友面板 *profile* 来进一步介绍书友的专属功能.

* [[书友面板]]
* [[购物车]]
* [[修改用户信息]]
* [[请求书籍]]
* [[我的图书馆]]

### 馆长功能

* [[馆长面板]]
* [[书籍管理]]
* [[书友管理]]
* [[销售管理]]
* [[请求管理]]
* [[添加新书]]
* [[原始 SQL]]

至此, 我们已经介绍完了本应用的全部主要功能, 但可以肯定的是, 它还有无限潜力...

## 五、特色和创新点

> 如果你的系统有任何功能或技术上的特色或创新之处, 请在这里加以说明.

### [[特色与创新]]

### 拓展性分析

除以上介绍的特点与创新外, 我们认为本应用还有一个非常重要的特点就是**高可拓展性**. 实现这个性质的动力在于我们希望能够进一步开发本应用, 使其成为一个能为更多人使用, 真正有实用价值的图书馆应用. 具体地, 高可拓展性体现在以下方面

* 同一模板与功能性 UI
* 数据库设计
    * 会员等级 + 角色创建
    * 好友圈
    * 更多的资料类型
* 标记系统, 新的标记类型, 用户互动
* 新的统计量, 自定义统计量

## 七、提交文件说明

对提交的源代码, 数据库脚本进行说明.

## 八、实验总结

> 总结本次实验, 你说学习到的内容, 以及碰到的问题等.

* 数据库知识的加强与拓展
    * E-R 设计的难题
    * 转化为模式的考虑
    * 函数依赖
    * 高级 SQL 语法
        * alter table
        * On delete cascade
        * On conflict do
    * 具体的数据库实现
* 应用开发的经验
    * Web 应用开发
    * HTML, CSS, Javascript

问题

* 进一步部署
