{% extends 'base.html' %}

{% block content %}
<h1>{% block title %} Advanced Search {% endblock %}</h1>

<blockquote class="blockquote bg-gray"><p>Fill in the information you know. </p></blockquote>

<form method="post">
    <div class="form-group">
        <label for="title">Title</label>
        <input type="text" name="title"
            placeholder="Book title" class="form-control"
            value="{{ request.form['title'] }}"></input>
    </div>

    <div class="form-group">
        <label for="isbn">ISBN</label>
        <input
            type="text"
            name="isbn"
            placeholder="13 digit ISBN"
            class="form-control"
            value="{{ request.form['isbn'] }}">
        </input>
    </div>

    <div class="form-group">
        <label for="author">Author</label>
        <input
            type="text"
            name="author"
            placeholder="The author of the book"
            class="form-control"
            value="{{ request.form['author'] }}">
        </input>
    </div>

    <div class="form-group">
        <label for="publisher">Publisher</label>
        <input
            type="text"
            name="publisher"
            placeholder="The publisher of the book"
            class="form-control"
            value="{{ request.form['publisher'] }}">
        </input>
    </div>

    <div class="form-group" style="float: left;">
        <label for="publsh_date">Publish Date</label>
        <input
            type="text"
            name="publish_year"
            placeholder="Publish year"
            class="form-control"
            value="{{ request.form['publish_year'] }}">
        </input>
    </div>
    <div class="form-group" style="float: left;padding-left: 5px;">
        <label>&nbsp;</label>
        <input
            type="text"
            name="publish_month"
            placeholder="Publish month"
            class="form-control"
            value="{{ request.form['publish_month'] }}">
        </input>
    </div>

    <div style="clear: both;"></div>

    <div class="form-group" style="float: left;">
        <label for="publsh_date">Price Range</label>
        <input
            type="number"
            name="price_min"
            placeholder="Price lower bound"
            class="form-control"
            value="{{ request.form['price_min'] }}">
        </input>
    </div>
    <div class="form-group" style="float: left;padding-left: 5px;">
        <label>&nbsp;</label>
        <input
            type="number"
            name="price_max"
            placeholder="Price upper bound"
            class="form-control"
            value="{{ request.form['price_max'] }}">
        </input>
    </div>
    
    <div style="clear: both;"></div>

    <div class="form-group">
        <button type="submit" class="btn btn-primary">Search</button>
    </div>
</form>

<hr class="mb-5 mt-5">

<h1>Result</h1>

{% for book in result %}
<a href="/{{ book['isbn'] }}">
    <h2>《{{ book['title'] }}》</h2>
</a>
<span class='badge badge-primary'>ISBN: {{ book['isbn']}}</span>
<span class='badge badge-primary'>Author: {{ book['author']}}</span>
<span class='badge badge-primary'>Publisher: {{ book['publisher']}}</span>
<span class='badge badge-primary'>Publish Date: {{ book['publish_year'] }}-{{ book['publish_month']}}</span>
<hr>
{% endfor %}

{% endblock %}